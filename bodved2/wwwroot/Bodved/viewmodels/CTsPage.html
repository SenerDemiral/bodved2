<link rel="import" href="/sys/polymer/polymer.html">

<template>
    <dom-bind>
        <template is="dom-bind">
            <div class="gridTbl">
                <div class="gridTbl_header">
                    <div>[[model.Hdr]]</div>
                    <div><a href="/bodved/CE/[[model.CCoNo]]" style="color: aliceblue;text-decoration: underline;"><iron-icon icon="vaadin:calendar"></iron-icon></a></div>
                </div>
                <div class="gridTbl_main">
                    <table id="tbl" class="fixTbl sngLine" on-click="MyFnc">
                        <colgroup>
                            <col style="width:2rem" />
                            <col style="width:var(--w-Team)" />
                            <col style="width:3rem" />

                            <col style="width:3rem" />
                            <col style="width:3rem" />
                            <col style="width:3rem" />

                            <col style="width:2rem" />
                            <col style="width:2rem" />
                            <col style="width:2rem" />
                            <col style="width:2rem" />
                            <col style="width:2rem" />

                            <col style="width:3rem" />
                            <col style="width:3rem" />
                            <col style="width:3rem" />
                            <col style="width:3rem" />
                            <col style="width:3rem" />
                            <col style="width:3rem" />

                            <col style="width:8rem" />
                            <col style="width:8rem" />
                            <col style="width:8rem" />
                        </colgroup>
                        <thead>
                            <tr>
                                <th rowspan="3">#</th>
                                <th rowspan="3">Takım</th>
                                <th rowspan="3">Puan</th>
                                <th rowspan="2" colspan="3">Skor</th>
                                <th rowspan="2" colspan="5">Müsabaka</th>
                                <th colspan="6">Maç</th>
                                <th rowspan="3">Yer</th>
                                <th rowspan="3">1.Kaptan</th>
                                <th rowspan="3">2.Kaptan</th>
                            </tr>
                            <tr>
                                <th colspan="3">Single</th>
                                <th colspan="3">Double</th>
                            </tr>
                            <tr>
                                <th>F</th>
                                <th>A</th>
                                <th>V</th>

                                <th>O</th>
                                <th>G</th>
                                <th>M</th>
                                <th>B</th>
                                <th>X</th>

                                <th>O</th>
                                <th>G</th>
                                <th>M</th>

                                <th>O</th>
                                <th>G</th>
                                <th>M</th>
                            </tr>
                        </thead>
                        <tbody>
                            <template is="dom-repeat" items="{{model.CTs}}">
                                <tr>
                                    <td>[[item.Idx]]</td>
                                    <td class="txtLeft"><a href="/bodved/CTPs/[[item.CToNo]]">[[item.Ad]]</a></td>

                                    <td><a href="/bodved/CT2CETs/[[item.CToNo]]">[[item.PW]]</a></td>

                                    <td>[[item.KF]]</td>
                                    <td>[[item.KW]]</td>
                                    <td>[[item.KL]]</td>

                                    <td>[[item.ET]]</td>
                                    <td>[[item.EW]]</td>
                                    <td>[[item.EL]]</td>
                                    <td>[[item.EB]]</td>
                                    <td>[[item.EX]]</td>

                                    <td>[[item.SMT]]</td>
                                    <td>[[item.SMW]]</td>
                                    <td>[[item.SML]]</td>

                                    <td>[[item.DMT]]</td>
                                    <td>[[item.DMW]]</td>
                                    <td>[[item.DML]]</td>


                                    <td class="colInfo">[[item.Adres]]</td>
                                    <td class="colInfo">[[item.K1Ad]]<br />[[item.K1Tel]]</td>
                                    <td class="colInfo">[[item.K2Ad]]<br />[[item.K2Tel]]</td>
                                </tr>
                            </template>
                        </tbody>
                    </table>
                </div>
            </div>
        </template>
    </dom-bind>

    <script>
        (function () {
            var curRowIndex = -1;
            var script = document._currentScript || document.currentScript;
            tmplt = script.previousElementSibling;

            tmplt.MyFnc = function (e) {
                var tr = e.target.closest("tr");
                if (tr === null) // Input Table'da oldugu icin oradan da gelebilit
                    return;

                if (tr.rowIndex >= 3) {     // Mark current Row
                    var td = e.target.closest("td");
                    console.log('RowIdx', tr.rowIndex, 'ColIdx', td.cellIndex);
                    if (curRowIndex !== -1) {
                        tbl.rows[curRowIndex].classList.remove("curRow");
                    }

                    curRowIndex = tr.rowIndex;
                    tr.classList.add("curRow");
                }
            };
        })();
    </script>

</template>